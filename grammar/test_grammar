

asdf = 'qert'
qwert = /testing/msix

tokens {}

list context root {
	'context', 'root' {
		return
	}
	'asdf' {
		push undef
		push $0
		push 'asdf'
		push !test_more
		push !test_more->[]
	}
	'qwerty', /\d+/i {
		$_{'asdf'} = 'qwerty'
		$_{'qwerty'}[] = 'zxcv'
		$_{'zxvc'}{'key'} = 'uiop'
		push []
		push {}
	}
	default {
		warn 'default path'
		return
	}
}

list context test_more {
	'a' {
		match 'b', 'c', $qwert
	}
	'b' {
		push {
			'a' => '15'
			'b' => $0
			'nested_hash' => {
				'nested' => 'true'
				'c' => '35'
			}
		}
		push !root->{
			'type' => 'nested'
		}
		$_ = {
			'a' => $0
			'b' => !root->'respawned'
		}
		push &direct_function_call
	}
}

list context test_if {
	'asdf' {
		if 'a' {
			push 'a'
		} elsif 'b' {
			push 'b'
		} else {
			push '-'
		}
	}
	'qwerty' {
		while ',' {
			push 'stuff'
		}
	}
}
